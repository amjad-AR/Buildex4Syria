<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Room Interior Configurator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            overflow: hidden;
            height: 100vh;
        }

        /* Three.js container */
        #scene-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Glassmorphism floating sidebar */
        .floating-sidebar {
            position: absolute;
            right: 30px;
            top: 30px;
            bottom: 30px;
            width: 320px;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            z-index: 10;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .sidebar-title {
            color: #f8fafc;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #ffffff 0%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-label {
            color: #94a3b8;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 12px;
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .material-select {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #f8fafc;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }

        .material-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .material-select:hover {
            border-color: rgba(255, 255, 255, 0.2);
        }

        .material-select option {
            background: #1e293b;
            color: #f8fafc;
        }

        .info-text {
            color: #64748b;
            font-size: 0.8rem;
            line-height: 1.6;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .controls-hint {
            position: absolute;
            bottom: 30px;
            left: 30px;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: #94a3b8;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 0.85rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 10;
        }

        .controls-hint strong {
            color: #f8fafc;
        }

        @media (max-width: 768px) {
            .floating-sidebar {
                width: 280px;
                right: 20px;
                top: 20px;
                bottom: 20px;
                padding: 20px;
            }

            .controls-hint {
                left: 20px;
                bottom: 20px;
                font-size: 0.75rem;
                padding: 12px 15px;
            }
        }
    </style>
</head>

<body>
    <!-- Three.js Scene Container -->
    <div id="scene-container"></div>

    <!-- Floating Control Sidebar -->
    <div class="floating-sidebar">
        <h2 class="sidebar-title">3D Room Configurator</h2>

        <div class="control-group">
            <label class="control-label" for="wallMaterial">Wall Material</label>
            <select id="wallMaterial" class="material-select">
                <option value="whitePaint">White Paint</option>
                <option value="beigePlaster">Beige Plaster</option>
                <option value="darkWood">Dark Wood</option>
            </select>
        </div>

        <div class="control-group">
            <label class="control-label" for="floorMaterial">Floor Material</label>
            <select id="floorMaterial" class="material-select">
                <option value="marble">Marble</option>
                <option value="parquetWood">Parquet Wood</option>
                <option value="concrete">Concrete</option>
            </select>
        </div>

        <div class="info-text">
            <strong>Interactive Controls:</strong><br>
            • Left click + drag to rotate<br>
            • Right click + drag to pan<br>
            • Scroll wheel to zoom<br><br>
            Select materials to instantly update the 3D room appearance.
        </div>
    </div>

    <!-- Controls Hint -->
    <div class="controls-hint">
        <strong>Mouse Controls:</strong> Rotate • Pan • Zoom
    </div>

    <!-- Three.js Library -->
    <script type="module">
        import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.181.2/build/three.module.js';
        import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.181.2/examples/jsm/controls/OrbitControls.js';

        // Make THREE and OrbitControls available globally for existing code
        window.THREE = THREE;
        window.OrbitControls = OrbitControls;

        // --- GLOBAL VARIABLES ---
        let scene, camera, renderer, controls;
        let floorMesh, wallBackMesh, wallLeftMesh, wallRightMesh;

        // Material definitions - These will be updated when textures are added
        const materials = {
            wall: {
                whitePaint: {
                    color: 0xffffff,
                    roughness: 0.4,
                    metalness: 0.0,
                    // FUTURE: texture: 'textures/walls/white-paint.jpg'
                },
                beigePlaster: {
                    color: 0xf5f5dc,
                    roughness: 0.6,
                    metalness: 0.0,
                    // FUTURE: texture: 'textures/walls/beige-plaster.jpg'
                },
                darkWood: {
                    color: 0x4a3728,
                    roughness: 0.8,
                    metalness: 0.1,
                    // FUTURE: texture: 'textures/walls/dark-wood.jpg'
                }
            },
            floor: {
                marble: {
                    color: 0xf8f8ff,
                    roughness: 0.1,
                    metalness: 0.3,
                    // FUTURE: texture: 'textures/floors/marble-white.jpg'
                },
                parquetWood: {
                    color: 0x8b4513,
                    roughness: 0.4,
                    metalness: 0.0,
                    // FUTURE: texture: 'textures/floors/parquet-wood.jpg'
                },
                concrete: {
                    color: 0x808080,
                    roughness: 0.7,
                    metalness: 0.0,
                    // FUTURE: texture: 'textures/floors/concrete-grey.jpg'
                }
            }
        };

        // --- INITIALIZATION ---
        function init() {
            createScene();
            createRoom();
            createLighting();
            createControls();
            setupEventListeners();
            animate();
        }

        // --- SCENE SETUP ---
        function createScene() {
            // Create scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a2e);

            // Create camera
            camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.set(8, 6, 8);

            // Create renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.outputColorSpace = THREE.SRGBColorSpace;

            document.getElementById('scene-container').appendChild(renderer.domElement);

            // Handle window resize
            window.addEventListener('resize', onWindowResize);
        }

        // --- ROOM GEOMETRY ---
        function createRoom() {
            const roomWidth = 10;
            const roomDepth = 8;
            const roomHeight = 4;

            // FLOOR
            const floorGeometry = new THREE.PlaneGeometry(roomWidth, roomDepth);
            const floorMaterial = createMaterial('floor', 'marble');
            floorMesh = new THREE.Mesh(floorGeometry, floorMaterial);
            floorMesh.rotation.x = -Math.PI / 2;
            floorMesh.position.y = 0;
            floorMesh.receiveShadow = true;
            scene.add(floorMesh);

            // BACK WALL (Feature wall)
            const wallBackGeometry = new THREE.PlaneGeometry(roomWidth, roomHeight);
            const wallBackMaterial = createMaterial('wall', 'whitePaint');
            wallBackMesh = new THREE.Mesh(wallBackGeometry, wallBackMaterial);
            wallBackMesh.position.set(0, roomHeight / 2, -roomDepth / 2);
            wallBackMesh.receiveShadow = true;
            scene.add(wallBackMesh);

            // LEFT WALL
            const wallSideGeometry = new THREE.PlaneGeometry(roomDepth, roomHeight);
            const wallLeftMaterial = createMaterial('wall', 'whitePaint');
            wallLeftMesh = new THREE.Mesh(wallSideGeometry, wallLeftMaterial);
            wallLeftMesh.rotation.y = Math.PI / 2;
            wallLeftMesh.position.set(-roomWidth / 2, roomHeight / 2, 0);
            wallLeftMesh.receiveShadow = true;
            scene.add(wallLeftMesh);

            // RIGHT WALL
            const wallRightMaterial = createMaterial('wall', 'whitePaint');
            wallRightMesh = new THREE.Mesh(wallSideGeometry, wallRightMaterial);
            wallRightMesh.rotation.y = -Math.PI / 2;
            wallRightMesh.position.set(roomWidth / 2, roomHeight / 2, 0);
            wallRightMesh.receiveShadow = true;
            scene.add(wallRightMesh);

            // Add a simple ceiling edge for visual reference
            const edgeGeometry = new THREE.EdgesGeometry(new THREE.BoxGeometry(roomWidth, roomHeight, roomDepth));
            const edgeMaterial = new THREE.LineBasicMaterial({ color: 0x444444, transparent: true, opacity: 0.3 });
            const edges = new THREE.LineSegments(edgeGeometry, edgeMaterial);
            scene.add(edges);
        }

        // --- LIGHTING SETUP ---
        function createLighting() {
            // Ambient light for overall illumination
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);

            // Directional light for main illumination and shadows
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.2);
            directionalLight.position.set(10, 10, 5);
            directionalLight.castShadow = true;

            // Shadow configuration
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            directionalLight.shadow.camera.near = 0.5;
            directionalLight.shadow.camera.far = 50;
            directionalLight.shadow.camera.left = -10;
            directionalLight.shadow.camera.right = 10;
            directionalLight.shadow.camera.top = 10;
            directionalLight.shadow.camera.bottom = -10;

            scene.add(directionalLight);

            // Additional point light for accent
            const pointLight = new THREE.PointLight(0xffffff, 0.3, 20);
            pointLight.position.set(-5, 3, 5);
            scene.add(pointLight);
        }

        // --- CONTROLS ---
        function createControls() {
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 3;
            controls.maxDistance = 20;
            controls.maxPolarAngle = Math.PI / 2;

            // Set initial camera target
            controls.target.set(0, 2, 0);
        }

        // --- MATERIAL CREATION ---
        // FUTURE ENHANCEMENT: This function will be modified to load real textures
        function createMaterial(type, materialName) {
            const materialData = materials[type][materialName];

            const material = new THREE.MeshStandardMaterial({
                color: materialData.color,
                roughness: materialData.roughness,
                metalness: materialData.metalness,
                // FUTURE: map: materialData.texture ? loadTexture(materialData.texture) : null,
                // FUTURE: When adding textures, also set:
                // material.map.wrapS = THREE.RepeatWrapping;
                // material.map.wrapT = THREE.RepeatWrapping;
                // material.map.repeat.set(2, 2); // Adjust repeat for tileable textures
            });

            return material;
        }

        // FUTURE: Texture loading function
        function loadTexture(texturePath) {
            // This function will be implemented when real textures are added
            // const textureLoader = new THREE.TextureLoader();
            // const texture = textureLoader.load(texturePath);
            // return texture;
            return null; // Placeholder for now
        }

        // --- EVENT LISTENERS ---
        function setupEventListeners() {
            // Wall material change
            document.getElementById('wallMaterial').addEventListener('change', function (e) {
                updateWallMaterial(e.target.value);
            });

            // Floor material change
            document.getElementById('floorMaterial').addEventListener('change', function (e) {
                updateFloorMaterial(e.target.value);
            });
        }

        // --- MATERIAL UPDATE FUNCTIONS ---
        function updateWallMaterial(materialName) {
            const newMaterial = createMaterial('wall', materialName);

            // Update all wall meshes
            wallBackMesh.material = newMaterial;
            wallLeftMesh.material = newMaterial;
            wallRightMesh.material = newMaterial;

            console.log('Wall material updated to:', materialName);
        }

        function updateFloorMaterial(materialName) {
            const newMaterial = createMaterial('floor', materialName);
            floorMesh.material = newMaterial;

            console.log('Floor material updated to:', materialName);
        }

        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        // --- RESIZE HANDLER ---
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // --- START APPLICATION ---
        init();
    </script>
</body>

</html>